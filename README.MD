# ğŸ™ï¸ Universal Transcription API

API universal para transcriÃ§Ã£o de Ã¡udio, OCR de imagens e extraÃ§Ã£o de texto de documentos.

## âœ¨ CaracterÃ­sticas

- ğŸµ **TranscriÃ§Ã£o de Ã¡udio**: WhatsApp otimizado + vÃ­deos grandes (Whisper)
- ğŸ–¼ï¸ **OCR de imagens**: EasyOCR + Tesseract para extrair texto de imagens
- ğŸ“„ **ExtraÃ§Ã£o de PDFs**: Texto direto + OCR para PDFs escaneados
- ğŸ“ **Documentos Office**: Word, Excel, PowerPoint (.docx, .xlsx, .pptx)
- ğŸ¤– **DetecÃ§Ã£o automÃ¡tica**: Identifica o tipo de arquivo automaticamente
- âš¡ **Cache inteligente**: Evita reprocessamento desnecessÃ¡rio
- ğŸ³ **Docker ready**: Deploy fÃ¡cil com Easypanel/Hostinger
- ğŸ”— **n8n integration**: Workflows prontos para automaÃ§Ã£o

## ğŸ› ï¸ Tecnologias

- **FastAPI**: Framework web moderno e rÃ¡pido
- **OpenAI Whisper**: IA de transcriÃ§Ã£o de Ã¡udio/vÃ­deo
- **EasyOCR**: OCR moderno com IA para imagens
- **Tesseract**: OCR tradicional e confiÃ¡vel
- **PyMuPDF + pdfplumber**: ExtraÃ§Ã£o de texto de PDFs
- **python-docx/openpyxl/python-pptx**: Documentos Office
- **FFmpeg**: Processamento de Ã¡udio/vÃ­deo
- **Docker**: ContainerizaÃ§Ã£o para deploy fÃ¡cil

## ğŸš€ Deploy RÃ¡pido (Easypanel + Hostinger)

### 1. Preparar no Windows

```powershell
# Clonar o repositÃ³rio
git clone https://github.com/SEU-USUARIO/whisper-transcription-api.git
cd whisper-transcription-api

# Fazer push para seu repositÃ³rio
git remote set-url origin https://github.com/SEU-USUARIO/whisper-transcription-api.git
git push
```

### 2. Deploy no Easypanel

1. Acesse seu Easypanel: `https://SEU-IP-VPS:3000`
2. Create Project â†’ Add Service â†’ From Source Code
3. Configure:
   - **Repository**: `https://github.com/SEU-USUARIO/whisper-transcription-api.git`
   - **Build Method**: Dockerfile
   - **Port**: 8000
   - **Memory**: 4GB
   - **CPU**: 2 cores

4. Environment Variables:
```env
MAX_FILE_SIZE_MB=100
LOAD_MODELS=tiny,base,small
LOG_LEVEL=INFO
```

5. Deploy! ğŸš€

### 3. Testar

```powershell
# No Windows PowerShell
.\test-windows.ps1 -ApiUrl "https://whisper-api-SEU-PROJETO.easypanel.host"
```

## ğŸ“š DocumentaÃ§Ã£o Completa

- **[ğŸš€ Deploy Guide](easypanel-deploy-guide.md)** - Deploy completo no Easypanel
- **[ğŸ”— n8n Integration](n8n-integration-guide.md)** - Workflows e automaÃ§Ãµes

## ğŸ¯ Endpoints Principais

### ğŸµ Ãudio e VÃ­deo
```bash
POST /transcribe-whatsapp    # Otimizado para WhatsApp
POST /transcribe-video       # VÃ­deos grandes
POST /transcribe-simple      # Resposta simples
POST /transcribe            # Resposta completa
```

### ğŸ–¼ï¸ Imagens (OCR)
```bash
POST /ocr/image             # OCR de imagens
# ParÃ¢metros: method=easyocr|tesseract
```

### ğŸ“„ PDFs
```bash
POST /extract/pdf           # ExtraÃ§Ã£o de PDFs
# ParÃ¢metros: method=auto|direct|ocr
```

### ğŸ“ Documentos Office
```bash
POST /extract/document      # Word, Excel, PowerPoint
# Suporta: .docx, .xlsx, .pptx
```

### ğŸ¤– DetecÃ§Ã£o AutomÃ¡tica
```bash
POST /extract/auto          # Detecta tipo automaticamente
# Suporta todos os formatos acima
```

## ğŸ’¾ Cache e Performance

- âœ… Cache baseado em hash MD5
- âœ… Modelos otimizados por tamanho de arquivo
- âœ… Limpeza automÃ¡tica de arquivos temporÃ¡rios
- âœ… Processamento assÃ­ncrono

## ğŸ”§ Desenvolvimento Local

```bash
# Instalar dependÃªncias
pip install -r requirements.txt

# Executar
python openai-whisper/transcribe.py

# Testar
curl http://localhost:8000/health
```

## ğŸ“Š Tecnologias por Tipo de Arquivo

| Tipo | Tecnologia | Formatos Suportados | Performance |
|------|------------|---------------------|-------------|
| **Ãudio** | Whisper (tiny/base/small) | mp3, wav, ogg, m4a, flac | âš¡âš¡âš¡ |
| **VÃ­deo** | Whisper + FFmpeg | mp4, avi, mov, mkv | âš¡âš¡ |
| **Imagem** | EasyOCR / Tesseract | jpg, png, bmp, tiff, webp | âš¡âš¡ |
| **PDF** | pdfplumber + OCR | pdf (texto e escaneado) | âš¡ |
| **Office** | python-docx/openpyxl/pptx | docx, xlsx, pptx | âš¡âš¡âš¡ |

## ğŸ”— IntegraÃ§Ã£o n8n

### Exemplos para n8n:

**Ãudio do WhatsApp:**
```javascript
{
  "url": "https://sua-api.easypanel.host/transcribe-whatsapp",
  "method": "POST",
  "bodyContentType": "multipart-form-data"
}
```

**OCR de Imagem:**
```javascript
{
  "url": "https://sua-api.easypanel.host/ocr/image",
  "method": "POST",
  "bodyContentType": "multipart-form-data"
}
```

**PDF:**
```javascript
{
  "url": "https://sua-api.easypanel.host/extract/pdf",
  "method": "POST",
  "bodyContentType": "multipart-form-data"
}
```

**Auto-detecÃ§Ã£o:**
```javascript
{
  "url": "https://sua-api.easypanel.host/extract/auto",
  "method": "POST",
  "bodyContentType": "multipart-form-data"
}
```

## ğŸ› Troubleshooting

### Build falhou?
- Verifique se todos os arquivos estÃ£o no repositÃ³rio
- Confirme se o Dockerfile estÃ¡ presente

### AplicaÃ§Ã£o lenta?
- Aumente a memÃ³ria para 4GB+
- Use apenas modelos necessÃ¡rios
- Verifique se o volume de cache estÃ¡ configurado

### Erro de memÃ³ria?
- Configure swap na VPS
- Reduza modelos carregados
- Monitore uso no Easypanel

## ğŸ“ˆ Custos Hostinger

| VPS | RAM | CPU | Status |
|-----|-----|-----|--------|
| VPS 1 | 2GB | 1 core | âš ï¸ Funciona mas lento |
| VPS 2 | 4GB | 2 cores | âœ… **Recomendado** |
| VPS 3 | 8GB | 4 cores | ğŸš€ Ideal para alto volume |

## ğŸ¤ Contribuindo

1. Fork o projeto
2. Crie uma branch: `git checkout -b feature/nova-funcionalidade`
3. Commit: `git commit -m 'Add: nova funcionalidade'`
4. Push: `git push origin feature/nova-funcionalidade`
5. Pull Request

## ğŸ“„ LicenÃ§a

Este projeto estÃ¡ sob a licenÃ§a MIT. Veja o arquivo LICENSE para mais detalhes.

## ğŸ‰ Feito com

- â¤ï¸ e muito cafÃ© â˜•
- ğŸ Python
- ğŸ¤– OpenAI Whisper
- ğŸš€ FastAPI
- ğŸ³ Docker
- â˜ï¸ Easypanel
